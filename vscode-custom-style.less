@import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;600;700&display=swap');
//@import 'load-fonts-fn.less';

@font-face {
  font-family: 'XcodeDigits';
  src: local('Xcode Digits Regular'), url('https://cdn.jsdelivr.net/gh/meewill/SF/Fonts/XcodeDigits-regular.ttf');
  unicode-range: U+0030-0039;
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

:root {
  --mono: 'SF Mono', ui-monospace, monospace;
  --fira: 'Fira Code', var(--mono);
  --xcode: XcodeDigits;
  --compact: 'SF Compact Text', var(--pro);
  --compact-rounded: 'SF Compact Rounded', var(--pro);
  --pro: 'SF Pro Text', -apple-system, sans-serif;
  --vscode-font-family: var(--compact);
}

* {
  //font-feature-settings: 'cv01', 'cv02', 'cv03', 'ss04' 0;
  // -webkit-font-smoothing: antialiased;
  // -moz-osx-font-smoothing: grayscale;
}

html {
  // -webkit-font-smoothing: antialiased !important;
}

.line-numbers {
  -webkit-font-smoothing: initial !important;
}

.monaco-editor {
  .sticky-line-number,
  .margin-view-overlays .line-numbers:not(.active-line-number) {
    opacity: 0.6;
  }
}

.sticky-line-number,
.overlayWidgets [widgetid="editor.contrib.stickyScrollWidget"] [style*="--vscode-editorStickyScroll"]:first-of-type,
#status\.editor\.selection a,
.marker-line,
.monaco-editor .margin-view-overlays,
.editor-container .margin-view-overlays {
  font-family: var(--xcode), var(--compact) !important;
}

.pane-body .detected-link {
  font-family: var(--xcode), var(--mono) !important;
}

.notification-toast-container:has([aria-label='Your Code installation appears to be corrupt. Please reinstall., notification']) {
  display: none !important;
}

.windows,
.mac,
.bb svg {
  font-family: var(--compact) !important;
}

.folder.monaco-breadcrumb-item,
.codicon-folder + .monaco-icon-label-container,
.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab .tab-label a,
.monaco-workbench .part.editor > .content .editor-group-container > .title .title-label a,
.monaco-editor .diff-hidden-lines-widget,
:is(.folder-icon, .file-icon).monaco-icon-label > .monaco-icon-label-container > .monaco-icon-name-container > .label-name {
  font-family: Berkeley Mono,
  var(--compact) !important;
  font-size: 0.75rem;
  letter-spacing: 0.015em;
}

.monaco-editor .find-widget .monaco-findInput .input[title="Find"],
.monaco-inputbox > .ibwrapper > .input[title="Search"],
.monaco-inputbox > .ibwrapper > .input[title="Replace"],
html .search-view .linematch > .match {
  font-family: var(--mono), Berkeley Mono;
  font-size: 0.6875rem;
  letter-spacing: normal;
}

.timeline-timestamp,
.vs .monaco-icon-label > .monaco-icon-label-container > .monaco-icon-description-container > .label-description {
  font-variant-numeric: tabular-nums;
}

.search-view .linematch .matchLineNum {
  order: -1;
  margin-left: 0;
  margin-right: 8px;
  min-width: 26px;
  text-align: right;
  opacity: 0.35;
}

/* sidebar */
.monaco-icon-label-container {
  display: flex;
}

.scm-view .monaco-list-row .resource-group > .name {
  font-weight: bold;
  letter-spacing: 0.02em;
}

[aria-label="NPM Scripts Section"] + .pane-body {
  .monaco-icon-label > .monaco-icon-label-container > .monaco-icon-name-container > .label-name {
    font-size: 0.75rem;
    font-family: var(--mono);
    letter-spacing: 0.01em;
  }

  .monaco-icon-label > .monaco-icon-label-container > .monaco-icon-description-container > .label-description {
    font-family: var(--mono);
    letter-spacing: 0.01em;
  }
}

// git history author and time
.monaco-icon-label > .monaco-icon-label-container > .monaco-icon-description-container > .label-description {
  font-size: .78em;
  letter-spacing: -0.02em;
}

.outline-element.monaco-breadcrumb-item,
.monaco-tl-contents.outline-element {
  font-family: var(--mono);
  letter-spacing: 0.02em;
  font-size: 0.7rem;
}

.monaco-editor .codicon.codicon-symbol-function,
.monaco-workbench .codicon.codicon-symbol-function {
  + .monaco-icon-label {
    font-style: italic;
  }
}

.codelens-decoration {
  letter-spacing: 0.025em;
}

// file blame
.view-line [class*="-TextEditorDecorationType"]:first-of-type::before {
  font-family: Berkeley Mono, var(--fira);
}

// git line history
.view-line [class*="-TextEditorDecorationType"]:last-of-type::after {
  font-style: italic !important;
}

.search-results [class*="ced-1-TextEditorDecorationType"] {
  //font-family: var(--xcode);
  font-weight: normal;
}

.search-view .linematch .matchLineNum {
  font-family: var(--xcode);
}

// inlay hint
span [class|="mtk1 dyn-rule"],
[class|="dyn-rule"] {
  vertical-align: baseline !important;
}

.hover-contents,
.sticky-widget,
.editor-scrollable {
  // -webkit-font-smoothing: antialiased !important;
  // -webkit-font-smoothing: auto !important;
  span {
    //font-weight: 500;
    //letter-spacing: 0.015rem !important;

    .mtkb {
      -webkit-font-smoothing: initial !important;
      font-weight: 900;
    }
  }
}

.debug-view-content .value.string {
  -webkit-font-smoothing: initial !important;
  font-weight: 900;
}

.monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab:hover:not(.active) {
  outline: 1px dashed;
  outline-offset: -5px;
}

// .monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.active,
// .monaco-workbench .part.editor > .content .editor-group-container > .title .tabs-container > .tab.active:hover {
// outline: 1px solid;
// outline-offset: -5px;
// }
.monaco-list .monaco-list-row:hover {
  outline: 1px dashed #f38518;
  outline-offset: -1px;
}

.monaco-workbench .part.editor > .content .editor-group-container > .title {
  .tabs-container > .tab .tab-label,
  .title-label {
    //order: 3;
  }

  .tabs-container > .tab {
    //padding-left: 0;
    //padding-right: 10px;

    > .tab-actions {
      //order: 2;

      .actions-container {
        justify-content: flex-end;
        display: flex;
      }
    }
  }

  .tabs-container > .tab.sizing-fit {
    //width: initial;
  }

  .tabs-container > .tab > .tab-actions > .monaco-action-bar {
    width: 27px;
  }
}

.open-editors .monaco-list .monaco-list-row {
  padding-left: 14px;
}

div.scm-editor-placeholder {
  font-family: var(--compact) !important;
}

.timeline-timestamp {
  font-family: var(--compact-rounded) !important;
}

.search-view .linematch > .match {
  //font-family: var(--mono);
  font-size: 0.9em;
  letter-spacing: -0.015em;
}

[class|="mtk1 dyn-rule"] + [class|="mtk1 dyn-rule"] {
  border-radius: 3px;
}

span [class|="mtk1 dyn-rule"] {
  font-weight: 400;
}

.windows {
  --monaco-monospace-font: var(--mono);
}

.load-fonts(@monoFamilies, {
  nam: 'SF Mono';
  dir: '/Fonts/SF-Mono-';
  ext: 'woff2';
}, {
  Thin: 200;
  Light: 300;
  Regular: 400;
  Medium: 500;
  Semibold: 600;
  Bold: 700;
  Heavy: 800;
}, @allUnicode, true);

.load-fonts(@textFamilies, {
  nam: 'SF Pro Text';
  dir: '/Fonts/SF-Pro-Text-';
  ext: 'woff2';
}, @allWeights, @generalUnicode, true);

.load-fonts(@compactFamilies, {
  nam: 'SF Compact Text';
  dir: '/Fonts/SF-Compact-Text-';
  ext: 'woff2';
}, @allWeights, @generalUnicode, true);

.load-stretch-fonts(@textFamilies, {
  nam: 'SF Pro';
  dir: '/Fonts/SF-Pro';
  ext: 'woff2';
}, @allWeights, @generalUnicode, true);

@textFamilies: 'SF Pro',
'Arial',
'Helvetica Neue',
'Helvetica';

@compactFamilies: 'SF Compact Text', "Segoe WPC", "Segoe UI";

@monoFamilies: 'SF Mono',
'Consolas',
'Courier New',
'SFMono-Regular',
'ui-monospace';

@repo: 'https://cdn.jsdelivr.net/gh/meewill/SF';

@styles: {
  normal: '';
  italic: 'Italic';
}

@thinWeights: {
  Thin: 200;
}

@usualWeights: {
  Light: 300;
  Regular: 400;
  Medium: 500;
  Semibold: 600;
  Bold: 700;
}

@boldWeights: {
  Semibold: 600;
  Bold: 700;
}

@allWeights: {
  Thin: 200;
  Light: 300;
  Regular: 400;
  Medium: 500;
  Semibold: 600;
  Bold: 700;
  Heavy: 800;
  Black: 900;
}

@formats: {
  @ttf: TrueType;
  @otf: OpenType;
  @woff: woff;
  @woff2: woff2;
}

.load-fonts(
  @families,
  @tar,
  @weights,
  @unicode,
  @local: false
) {
  each(@families, .(@family) {
    each(@weights, .(@numeric, @weight-key) {
      each(@styles, .(@style-val, @style) {
        // @keyword: extract(@weight, 1);
        // @numeric: extract(@weight, 2);
        @font-face {
          font-family: @family;
          .use-src(@family, @tar, @repo, @weight-key, @style-val, @numeric, @style, @local);
          unicode-range: @unicode;
          font-weight: @numeric;
          font-style: @style;
          font-display: swap;
        }
      })
    })
  })
}

.use-src(
  @family,
  @tar,
  @repo,
  @weight-key,
  @style-val,
  @numeric,
  @style,
  @local: false
) {
  @nam: @tar[nam];
  @dir: @tar[dir];
  @ext: @tar[ext];
  @format: @formats[@@ext];
  @italic: if(@style-val='', e(''), ' Italic');
  src: if(@local, local('@{nam} @{weight-key}@{italic}') e(','),) url('@{repo}@{dir}@{weight-key}@{style-val}.@{ext}') format('@{format}');
}

.load-local-fonts(
  @families,
  @tar,
  @weights,
  @unicode,
  @styles,
  @local: false
) {
  each(@families, .(@family) {
    @font-face {
      font-family: @family;
      src: local(@family);
      unicode-range: @unicode;
      font-display: swap;
    }
  })
}

.load-stretch-fonts(
  @families,
  @tar,
  @weights,
  @unicode,
  @local: false
) {
  each(@families, .(@family) {
    each(@weights, .(@numeric, @weight-key) {
      @font-face {
        font-family: @family;
        .use-stretch-src(
                @family,
                @tar,
                @repo,
                @weight-key,
                '',
                @numeric,
                '',
                @local
        );
        unicode-range: @unicode;
        font-weight: @numeric;
        font-stretch: condensed;
        font-display: swap;
      }
    })
  })
}

.use-stretch-src(
  @family,
  @tar,
  @repo,
  @weight-key,
  @style-val,
  @numeric,
  @style,
  @local
) {
  @nam: @tar[nam];
  @dir: @tar[dir];
  @ext: @tar[ext];
  @format: @formats[@@ext];
  src: if(@local, local('@{nam} Condensed @{weight-key}') e(','),) url('@{repo}@{dir}.@{ext}') format('@{format}');
}

@generalUnicode: e('U+0000-024F'),
e('U+02B0-052F'),
e('U+1DC0-20CF'),
e('U+2190-22FF'),
e('U+2460-24FF'),
e('U+25A0-25FF'),
e('U+2700-27FF'),
e('U+2900-2BFF'),
e('U+2C60-2C7F'),
e('U+2DE0-2E7F'),
e('U+3200-32FF'),
e('U+A640-A69F'),
e('U+A700-A7FF'),
e('U+E000-F8FF'),
e('U+FFF0-FFFF'),
e('U+F0000-10FFFF');
@plusUnicode: e('U+0250-02AF'),
e('U+1D00-1DBF'),
e('U+2190-22FF');
@allUnicode: @generalUnicode,
@plusUnicode;

@zhUnicode: e('U+4E00-9FFF'),
e('U+3400-4DBF'),
e('U+20000-2A6DF'),
e('U+F900-FAFF'),
e('U+2F800-2FA1F');
// e('U+2A700–2B73F, U+2B740–2B81F, U+2B820–2CEAF'),
